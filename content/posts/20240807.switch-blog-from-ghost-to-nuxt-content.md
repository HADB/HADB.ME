---
title: 博客从 Ghost 迁移至 Nuxt Content
date: 2024-08-07
tags: ['博客', '日志']
---

最近花了很多精力在迁移博客系统，从 Ghost 迁移至基于 Nuxt Content 自研的博客系统。

目前样式和功能基本搞好了，刚才也完成了 2012 年以来所有的文章的重新录入工作。

暂时先缓口气。明天看看能不能把评论数据迁移过来。然后就可以考虑把域名切过来了。

---

目前存在的一些未解决的问题：

1. Feed 订阅目前 Nuxt 官方插件 [@nuxtjs/feed](https://nuxt.com/modules/feed) 暂未支持 Nuxt 3，可参见这个 issue：[Nuxt 3 Support](https://github.com/nuxt-community/feed-module/issues/106)，有几个大佬做过尝试，经历了非常漫长的过程，但最终都没完成。我大致看了下历史，目前主要卡点还是 content 目前没有提供在服务端生成 html 的方法，没办法生成 feed 的全文内容。所以目前自己接 [feed](https://github.com/jpmonette/feed) 库去实现也只能显示摘要，无法生成全文，这个问题暂时没有找到更好的解决方案。

2. CloudFlare Pages 部署的时候，worker bundle 体积太大，导致部署失败，主要原因是 `Shiki` 体积太大，参考 issue：[This module add more than 2.5MB to the output](https://github.com/nuxt/content/issues/2422)。目前解法是用 `pnpm generate` 部署纯静态模式。

3. 纯静态模式部署有个问题，是当我的文章 tag 带了特殊符号的时候，比如 `C#`、`CI/CD` 这样的 tag，在路由上通过 `encodeURIComponent` 处理后，prerender 出来的文件名会变成 `C%23`、`CI%2FCI`，这样的文件名在 CloudFlare Pages 上会导致 404。目前通过自己限制标签不带特殊符号来解决。
